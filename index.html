<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>红石火炮数据分析系统</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/charts.css">
    <link rel="stylesheet" href="styles/controls.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dexie@3.2.4/dist/dexie.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>红石火炮数据分析系统</h1>
            <p class="subtitle">TNT火炮射程与弹道数据可视化平台</p>
        </header>

        <main class="main-content">
            <!-- 综合火力曲线图区域 -->
            <section class="chart-section">
                <div class="chart-header">
                    <h2 id="chart-title">综合火力曲线 - 射程与弹道</h2>
                    <div class="chart-controls">
                        <button id="show-all-btn" class="btn btn-primary">全部显示</button>
                        <button id="hide-all-btn" class="btn btn-secondary">全部隐藏</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="main-chart"></canvas>
                </div>
            </section>

            <!-- 采样范围控制区域 -->
            <section class="sampling-controls">
                <h3>采样范围设置</h3>
                <div class="control-group">
                    <div class="control-item">
                        <label for="horizontal-min">水平偏移最小值 (-200~200):</label>
                        <input type="number" id="horizontal-min" min="-200" max="200" value="-200">
                    </div>
                    <div class="control-item">
                        <label for="horizontal-max">水平偏移最大值 (-200~200):</label>
                        <input type="number" id="horizontal-max" min="-200" max="200" value="200">
                    </div>
                    <div class="control-item">
                        <label for="vertical-min">垂直偏移最小值 (-40~170):</label>
                        <input type="number" id="vertical-min" min="-40" max="170" value="-40">
                    </div>
                    <div class="control-item">
                        <label for="vertical-max">垂直偏移最大值 (-40~170):</label>
                        <input type="number" id="vertical-max" min="-40" max="170" value="170">
                    </div>
                    <button id="apply-range-btn" class="btn btn-primary">应用范围</button>
                </div>
            </section>

            <!-- 预设曲线选择区域 -->
            <section class="preset-curves">
                <h3>预设火力曲线</h3>
                <div class="preset-buttons">
                    <button class="btn btn-preset" data-preset="comprehensive">综合火力</button>
                    <button class="btn btn-preset" data-preset="flat">平射火力 (垂直0~40)</button>
                    <button class="btn btn-preset" data-preset="high">高射火力 (垂直40~80)</button>
                    <button class="btn btn-preset" data-preset="antiair">防空火力 (垂直80~170)</button>
                    <button class="btn btn-preset" data-preset="halfaxis">半轴火力 (水平0~40)</button>
                </div>
            </section>

            <!-- 火炮列表区域 -->
            <section class="cannons-list">
                <h3>火炮列表</h3>
                <div id="authors-container"></div>
            </section>

            <!-- 图例区域 -->
            <section class="legend-section">
                <h3>当前显示的火炮</h3>
                <div id="legend-container"></div>
            </section>
        </main>

        <footer class="footer">
            <p>&copy; 2024 TNT火炮数据分析系统 - 数据来源: tntpk.oooiai.com</p>
        </footer>
    </div>

    <script src="scripts/database.js"></script>
    <script src="scripts/api.js"></script>
    <script src="scripts/charts.js"></script>
    <script src="scripts/controls.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html>